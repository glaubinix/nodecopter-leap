// Generated by CoffeeScript 1.6.3
(function() {
  var Drone;

  Drone = (function() {
    function Drone(eventemitter, client) {
      this.eventemitter = eventemitter;
      this.client = client;
    }

    Drone.prototype.start = function() {
      this.registerTakeoffAndLanding();
      return this.registerMoves();
    };

    Drone.prototype.registerTakeoffAndLanding = function() {
      var _this = this;
      this.eventemitter.on('takeoff', function() {
        return _this.client.takeoff(function() {
          return _this.eventemitter.emit('inflight');
        });
      });
      return this.eventemitter.on('land', function() {
        return _this.client.land(function() {
          return _this.eventemitter.emit('ready');
        });
      });
    };

    Drone.prototype.registerMoves = function() {
      var _this = this;
      this.eventemitter.on('up', function(speed) {
        return _this.client.up(_this.sanatizeSpeed(speed));
      });
      return this.eventemitter.on('down', function(speed) {
        return _this.client.down(_this.sanatizeSpeed(speed));
      });
    };

    Drone.prototype.sanatizeSpeed = function(speed) {
      return Math.min(speed / 1000, 1);
    };

    return Drone;

  })();

  module.exports = Drone;

}).call(this);
